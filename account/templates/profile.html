{% extends "base_user_account.html" %}

{% load widget_tweaks %}
{% load thumbnail %}

{% block content %}

<div class="card mt-5">

    <div class="card-header">
        <h4>Profile Information</h4>
    </div>

    <div class="card-body">
        <table class="table table-borderless">
            <tbody>
                <tr>
                    <th>User</th>
                    <td>
                        {% if request.user.userprofile.avatar %}
                            <img class='img-thumbnail' src="{{ request.user.userprofile.avatar|thumbnail_url:'avatar' }}" alt="Avatar" />
                            {% comment %} <img src="{% thumbnail request.user.userprofile.avatar 80x80 crop %}" class="img-thumbnail" alt="Avatar">
                            <img style='max-width:50px' class='img-thumbnail' src="{{ request.user.userprofile.avatar.url }}" alt="Imagen de perfil"> {% endcomment %}
                        {% else %}
                            {% comment %} <img src="/media/img/default-avatar.png" alt="Sin foto"> {% endcomment %}
                        {% endif %}
                        {{ user.username }}
                    </td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td>{{ user.email }}</td>
                </tr>
                <tr>
                    <th>Authenticated</th>
                    <td>{{ user.is_authenticated }}</td>
                </tr>
                <tr>
                    <th>Anonymous</th>
                    <td>{{ user.is_anonymous }}</td>
                </tr>
            {% if request.user.userprofile %}
                <tr>
                    <th>Avatar</th>
                    <td>
                        <ul>
                            <li>{{ request.user.userprofile.avatar.file}}</li>
                            <li>{{ request.user.userprofile.avatar.url}}</li>
                            <li>{{ request.user.userprofile.avatar.name}}</li>
                        </ul>
                    </td>
                </tr>
            {% endif %}
            </tbody>
        </table>
        {% if form.errors %}
        <div class="alert alert-warning">
            {{ form.errors }}
        </div>
        {% endif %}
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mt-3">
                {{ form.avatar|add_label_class:"form-label" }}
                {{ form.avatar|add_class:"form-control" }}
            </div>
            <div class="mt-3">
                {{ form.age|add_label_class:"form-label" }}
                {{ form.age|add_class:"form-control" }}
            </div>
            <div class="mt-3">
                {{ form.address|add_label_class:"form-label" }}
                {{ form.address|add_class:"form-control" }}
            </div>
            <div class="mt-3">
                {{ form.language|add_label_class:"form-label" }}
                {{ form.language|add_class:"form-control" }}
            </div>
            {{ form.user }}
            <button type="submit" class="mt-3 btn btn-primary">Send</button>
        </form>
    </div>

</div>
{% endblock %}